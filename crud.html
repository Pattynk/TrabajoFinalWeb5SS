<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ToDoList CRUD DOM</title>
  <link rel="stylesheet" href="style.css">
  <style>
    input, button { padding: 10px; margin: 5px 0; }
    ul { padding: 0; }
    li { list-style: none; padding: 10px; background: #eee; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; transition: transform .2s ease, background .3s; }
    li.completed span { text-decoration: line-through; color: #777; }
    li.added { animation: fadeIn .3s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px);} to {opacity: 1; transform: translateY(0);} }
    .actions button { margin-left: 5px; }
  </style>
</head>
<body>
  <header>
    <h1>CRUD </h1>
    <nav>
        <a href="index.html">Biografía</a>
        <a href="glosario.html">Glosario</a>
        <a href="crud.html">CRUD</a>
        <a href="musica.html">Música</a>
        <a href="herramientas.html">Herramientas</a>
    </nav>    
  </header>

  <div >
    <h2>Lista de tareas</h2>
    <br>  
    <br>  
    
    <p class="lead">Abajo encontraras una herramienta para seguir las tareas pendientes por hacer, crea, edita, completa y elimina (CRUD).
  <br>
  <br>  
  <input id="taskInput" type="text" placeholder="Escribe una tarea..." />
    <button id="addBtn">Agregar</button>
    </p>
    
    <div class="container "> 
          <ul id="taskList"></ul>
  
    </div>
  </div>

  <script>
    const taskInput = document.getElementById('taskInput');
    const addBtn = document.getElementById('addBtn');
    const taskList = document.getElementById('taskList');

    let editingId = null;
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

    function saveToLocalStorage() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    function renderTasks() {
      taskList.innerHTML = '';
      tasks.forEach(t => {
        const li = createTaskElement(t.id, t.text, t.completed);
        taskList.appendChild(li);
      });
    }

    function createTaskElement(id, text, completed = false) {
      const li = document.createElement('li');
      li.setAttribute('data-id', id);
      if (completed) li.classList.add('completed');
      li.classList.add('added');

      const span = document.createElement('span');
      span.textContent = text;

      const actions = document.createElement('div');
      actions.classList.add('actions');

      const toggleBtn = document.createElement('button');
      toggleBtn.textContent = completed ? 'Desmarcar' : 'Completar';
      toggleBtn.onclick = () => toggleComplete(id);

      const editBtn = document.createElement('button');
      editBtn.textContent = 'Editar';
      editBtn.onclick = () => editTask(id, span);

      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = 'Eliminar';
      deleteBtn.onclick = () => deleteTask(id);

      actions.appendChild(toggleBtn);
      actions.appendChild(editBtn);
      actions.appendChild(deleteBtn);

      li.appendChild(span);
      li.appendChild(actions);
      return li;
    }

    function addTask() {
      const text = taskInput.value.trim();
      if (!text) return;

      if (editingId) {
        const task = tasks.find(t => t.id === editingId);
        task.text = text;
        editingId = null;
        addBtn.textContent = 'Agregar';
      } else {
        const newTask = { id: Date.now(), text, completed: false };
        tasks.push(newTask);
      }

      saveToLocalStorage();
      renderTasks();
      taskInput.value = '';
    }

    function editTask(id, spanEl) {
      taskInput.value = spanEl.textContent;
      editingId = id;
      addBtn.textContent = 'Guardar';
    }

    function toggleComplete(id) {
      const task = tasks.find(t => t.id === id);
      task.completed = !task.completed;
      saveToLocalStorage();
      renderTasks();
    }

    function deleteTask(id) {
      tasks = tasks.filter(t => t.id !== id);
      saveToLocalStorage();
      renderTasks();
    }

    addBtn.addEventListener('click', addTask);
    renderTasks();
  </script>
</body>
</html>
